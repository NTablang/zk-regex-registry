import { pubKeyHasher } from "@/lib/contract-deploy";
import { toCircomBigIntBytes, bytesToBigInt } from "@zk-email/helpers";
import { pki } from 'node-forge';

// const x = bigIntToChunkedBytes(bytesToBigInt(Buffer.from("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAtBcSOBhiSmF6i4bRi923Ni+tAwnh9Kd3GmWBhg4tF+XQLpbDlTxOQdZSddJbufV6RyJO0wj9hydBTAb6hxbm2ko6hEsI2RYYltUinegcfKnHoTwKh2aRpnY/7cGhsBbF9OF5vSwXWWVxzOHSNMAE5tKyyfcKX+8kvG2GblPQoX4RdGxnLuDN/F5qrsN1U/j6Z1zayPKE+YAsdfIp5ZhB2vybNqD4xvgHYpkJWoK6mPd5/apdZ33XCdrVU9oA0fT+E68ocsQbHFfsrVWlQfM/5hBCMKNtJRLOl+bf9BANOUzBYqNYoXG8fGdOwkZuSIC3vZEcfwe4LQv+UETsgxCTFwIDAQAB", 'base64')),121,17)

const b64key = "MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAn46zCm3zHBmS1zePKxA+RIXw41Nu6l91NpLLBnWnrcZ35H/843XNWPZEQ0OgGwx/yqTXETMLXIDjGEWlK1E1mpdguqu+3s7SuIHoo5+i6mgyxJguljkwc3dk8ojnJ6VVUPnDh5GJArkAhXxEb1aOK1BVGM0yDlmYdmaOfd48qcx5iODP/MFc8pivfxEXTIL+aUz7+X69lMiwUSHpWYL3/a5X3nLD0zEntxv08xs8J/rpuRg4v+OXEOhcNvhkeiRZqJBdpJTkoEZfGvdTct+U0YYC69NW0ClUcKio2uDPmxU1xvfvHbSTW2gHYk8RpYZaxLACULdMo+Vt4Na/oIR+swIDAQAB"
var pkstr = '-----BEGIN PUBLIC KEY-----' + b64key + '-----END PUBLIC KEY-----';
const pubkey = pki.publicKeyFromPem(pkstr);

const x = toCircomBigIntBytes(BigInt(pubkey.n.toString()))
console.log(x)

pubKeyHasher(
    x
    // ["913891206902747244664747020968558259", "1972901582512682675310311312776703330", "1271254850995070111689795451119553905", "761251125734672353504177040036773981", "2649236452477034537871075340909610458", "797204999605065995847033273845334469", "431665553429246829372283307811261199", "2519265340557762696665849280444169595", "614771124440053389931039527792329052", "346547961474255468698682697091329228", "1644056136146630059529017048340409920", "1435425770606909017673442738893123308", "429440991622236380985084713724774430", "1333616918559527589215725487503491629", "824096634501694007840550414810418446", "646624441958089088676457473935543531", "3236208936482879880513152955132688"]
).then(console.log)